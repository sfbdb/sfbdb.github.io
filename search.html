<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="bootstrap-4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap-toc-1.0.1/css/bootstrap-toc.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Super Fantasy Brawl DB: Card Search</title>
  </head>
  <body data-spy="scroll" data-target="#toc" data-offset="70">

    <nav id="toc" data-toggle="toc"></nav>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
      <a class="navbar-brand" href="index.html">Super Fantasy Brawl <small class="text-muted">DB</small></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbar">
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="card-gallery-link" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Card Gallery
            </a>
            <div class="dropdown-menu" aria-labelledby="card-gallery-link">
              <a class="dropdown-item" href="index.html?arrange_by=core">Arranged by core</a>
              <a class="dropdown-item" href="index.html?arrange_by=type">Arranged by type</a>
              <a class="dropdown-item" href="index.html?arrange_by=numeric">Arranged numerically</a>
            </div>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="search.html">Search</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="champions.html">Champions</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="challenges.html">Challenges</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
        </ul>
      </div>
    </nav>
    
    <script id="sfb-cards-template" type="text/x-handlebars-template">
      {{#if params}}
      <p>
        Search filters:
        {{#each filters}}
        {{#if this}}
        <a href="javascript:removeSearch('{{@key}}', '{{this}}');" class="badge badge-secondary">
          {{@key}}: {{this}} &times;
          </a>
        {{/if}}
        {{/each}}
        <i>({{cards.length}} total results found)</i>
      </p>
      {{/if}}
    
      <div class="sfb-search-results">
      {{#each cards}}
      <div class="sfb-card">
        <a href="img/{{champion_code}}-{{index}}.png"><img class="sfb-card-action" src="img/small/{{champion_code}}-{{index}}.png" /></a>
        <div class="details">
          <a href="javascript:search('champion', '{{champion_code}}');" class="badge badge-secondary">{{champion_code}}</a>
          {{#ifEq card.core 'red'}}
            <a href="javascript:search('core', 'red');" class="badge badge-danger">destruction</a>
          {{/ifEq}}
          {{#ifEq card.core 'yellow'}}
            <a href="javascript:search('core', 'yellow');" class="badge badge-warning">creation</a>
          {{/ifEq}}
          {{#ifEq card.core 'blue'}}
            <a href="javascript:search('core', 'blue');" class="badge badge-primary">manipulation</a>
          {{/ifEq}}
          </a>
          <a href="javascript:search('type', '{{card.type}}');" class="badge badge-dark">{{card.type}}
            {{#ifEq card.type 'attack'}}
            <span class="badge badge-danger">{{card.strength}}</span>
            {{/ifEq}}
          </a>
          {{#if card.movement}}
            <a href="javascript:search('movement', 'true');" class="badge badge-dark">movement <span class="badge badge-success">{{card.movement}}</span></a>
          {{/if}}
        </div>
        <div class="tags">
          {{#if card.target}}
            <a href="javascript:search('target', '{{card.target}}');" class="badge badge-pill badge-info">{{card.target}}
              {{#if card.max_range}}
                <span class="badge badge-pill badge-warning">
                {{#if card.min_range}}
                  {{card.min_range}}-{{card.max_range}}
                {{else}}
                  {{card.max_range}}
                {{/if}}
                </span>
              {{/if}}
            </a>
          {{/if}}
          {{#each card.tags}}
            <a href="javascript:search('tag', '{{this}}');" class="badge badge-pill badge-info">{{this}}</a>
          {{/each}}
        </div>
      </div>
      {{/each}}
      </div>
    </script>
    
    <div id="content" />

    <script src="jquery-3.5.0/jquery.min.js"></script>
    <script src="bootstrap-4.4.1/js/bootstrap.min.js"></script>
    <script src="bootstrap-toc-1.0.1/js/bootstrap-toc.min.js"></script>
    <script src="handlebars-4.7.6/handlebars.min.js"></script>
    <script src="data.js"></script>
    <script src="search.js"></script>

  </body>
</html>